name: MasterDeployCI
on:
  push:
    branches:
      - master
jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: [3.8]

    steps:
    - name: Checkout master
      uses: actions/checkout@master
      with:
        fetch-depth: '0'
    - name: Read version
      id: getversion
      run: |
        grep version galaxy.yml
    - name: display value
      run: echo ${{ steps.getversion.outputs }}
    # - name: Set up Python ${{ matrix.python-version }}
    #   uses: actions/setup-python@v2
    #   with:
    #     python-version: ${{ matrix.python-version }}
    # - name: Install dependencies
    #   run: |
    #     python -m pip install --upgrade pip
    #     pip install ansible
    #     if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
    # - name: Create ansible collection package
    #   run: ansible-galaxy collection build
    # - name: Create Release
    #   id: create_release
    #   uses: actions/create-release@v1
    #   env:
    #     GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    #   with:
    #     tag_name: v1.0.1
    #     release_name: Release v1.0.1
    #     body: |
    #       # Ansible Collection: imjoseangel.general
    #       ![MasterDeployCI](https://github.com/imjoseangel/generalcollection/workflows/MasterDeployCI/badge.svg)

    #       Install with:
    #       ```sh
    #       ansible-galaxy collection install -r requirements.yml -f
    #       ```
    #     draft: false
    #     prerelease: false
    # - name: Upload Release Asset
    #   id: upload-release-asset
    #   uses: actions/upload-release-asset@v1
    #   env:
    #     GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    #   with:
    #     upload_url: ${{ steps.create_release.outputs.upload_url }}
    #     asset_path: imjoseangel-general-1.0.1.tar.gz
    #     asset_name: imjoseangel-general-1.0.1.tar.gz
    #     asset_content_type: application/tar+gzip
